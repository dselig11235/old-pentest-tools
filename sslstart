#!/bin/bash

. ~/.profile
. ~/.bashrc
. ~/bin/screenshot-functions.sh
. ~/bin/target-functions.sh
for target in `cat targets.ssl`; do
    target=$(gethost "$target"):$(getport "$target")
    screenshot "SSL Issues on $target Identified with sslscan" sslscan "$target"
    echo | screenshot_multi "SSL Certificate on $target" "openssl s_client -showcerts -servername ${target#:*} -connect $target |& openssl x509 -inform pem -noout -text | head -65"
    #clear
    #echo -e "${red}bash-4.3#$nc sslscan $target"
    #temp=`mktemp`
    #sslscan "$target" | tee "$temp"
    #declare -i sz=`awk 'END {print NR}' "$temp"`
    #sz=$(((sz+1)*16))
    #rm "$temp"
    #import -window "$winid" -crop "800x$sz+12+14" "sslscan.$target"
done
